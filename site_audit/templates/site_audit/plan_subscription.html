{% extends "base-setup.html" %}
{% load static %}
{% block extrahead %}
<style>
  .disabled {
    pointer-events: none;
  }

  .select_dropdown {
    display: none;
  }

  .outcome {
    display: none;
  }

  .position_rel {
    position: relative;
  }

  #content {
    display: flex;
    background-color: #f5f5f5;
    border: 1px solid #c2c2c2;
  }

  .checkout__card {
    display: flex;
    align-items: center;
  }

  #user_plan {
    color: #707070;
  }

  .card__numb,
  .card__cvc,
  .card__exp {
    padding: 3px;
    margin: 3px;
    border: 1px solid;
  }

  payment__card,
  .card__modal {
    display: none;
    position: absolute;
    z-index: 10;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 200px;
    overflow: hidden;
    border: 2px solid;
  }

  input {
    border: 2px solid;
  }

  .field {
    background: transparent;
    font-weight: 400;
    border: 0;
    color: #31325f;
    outline: none;
    flex: 1;
    padding-right: 10px;
    padding-left: 10px;
    cursor: text;
  }

  .field::-webkit-input-placeholder {
    color: #cfd7e0;
  }

  .field::-moz-placeholder {
    color: #cfd7e0;
  }

  .outcome {
    float: left;
    width: 100%;
    padding-top: 8px;
    min-height: 24px;
    text-align: center;
  }

  .success,
  .error {
    display: none;
    font-size: 13px;
  }

  .success.visible,
  .error.visible {
    display: inline;
  }

  .error {
    color: #e4584c;
  }

  .success {
    color: #666ee8;
  }

  .success .token {
    font-weight: 500;
    font-size: 13px;
  }

  .brand {
    font-size: 16px !important;
    color: #999 !important;
    margin: 6px;
  }

  #cc-number::placeholder,
  #cc-cvc::placeholder,
  #cc-exp::placeholder {
    font-size: 19px;
    letter-spacing: 0.3rem;
    color: #ccc;
  }

  #cc-number {
    padding: 0 20px;
    height: 40px;
    box-shadow: 0 0 8px 0 rgb(0 0 0 / 8%);
    border: none;
    font-size: 14px;
  }

  #cc-cvc,
  #cc-exp {
    padding: 0 20px;
    height: 40px;
    box-shadow: 0 0 8px 0 rgb(0 0 0 / 8%);
    border: none;
    font-size: 14px;
  }

  #plan {
    box-shadow: 0 0 8px 0 rgb(0 0 0 / 8%);
    border: none;
    color: #70709e
  }

  .pro-plan {
    display: none
  }

  .show {
    display: block
  }
</style>

<link href="{% static 'site_audit/css/plan_subscription.css'%}" rel="stylesheet" />
{% endblock %}
{% block content %}

<section class="login">
  <div class="container">
    <div class="login-inner ">
      <div class="row">
        <div class="col-md-5 pe-0">
          <div class="login-left">
            <a href="javscript:;" class="left-side-btn c-white font-14">
              <div class="circle">
                <img src="https://www.websiterankingexpert.com/resources/images/arrow-sm.svg" alt="arrow-sm.svg">
              </div>
              <span class="text">Visit Our Subscription Plan</span>

            </a>
          </div>
        </div>
        <div class="col-md-1 p-0">
          <ul class="social-icons">
            <li>
              <a href="javascript:;" class="fb">
                <svg id="Component_10_1" data-name="Component 10 – 1" xmlns="http://www.w3.org/2000/svg" width="21"
                  height="33" viewBox="0 0 21 27.264">
                  <path id="_013-facebook" class="fb-svg" data-name="013-facebook"
                    d="M10.058,27.264H5.692A1.324,1.324,0,0,1,4.37,25.941V16.094H1.823A1.324,1.324,0,0,1,.5,14.771v-4.22A1.324,1.324,0,0,1,1.823,9.229H4.37V7.116a7.2,7.2,0,0,1,1.9-5.155A6.853,6.853,0,0,1,11.324,0l3.33.005a1.324,1.324,0,0,1,1.32,1.323V5.246a1.324,1.324,0,0,1-1.322,1.323H12.411c-.684,0-.858.137-.9.179-.061.07-.134.267-.134.811V9.228h3.1a1.344,1.344,0,0,1,.654.166,1.327,1.327,0,0,1,.68,1.157l0,4.22a1.324,1.324,0,0,1-1.323,1.322H11.381v9.848A1.324,1.324,0,0,1,10.058,27.264Zm-4.09-1.6H9.783V15.378a.884.884,0,0,1,.883-.883h3.553V10.827H10.665a.884.884,0,0,1-.883-.883V7.559a2.722,2.722,0,0,1,.535-1.868,2.709,2.709,0,0,1,2.093-.72h1.966V1.6l-3.053,0c-3.3,0-5.355,2.114-5.355,5.517V9.944a.884.884,0,0,1-.883.883H2.1v3.668H5.085a.884.884,0,0,1,.883.883ZM14.651,1.6h0Zm0,0"
                    transform="translate(-0.5)" fill="#707070"></path>
                </svg>
              </a>
            </li>
            <li>
              <a href="javascript:;" class="insta">
                <svg id="Component_11_1" data-name="Component 11 – 1" xmlns="http://www.w3.org/2000/svg" width="39"
                  height="34" viewBox="0 0 39 27.264">
                  <g id="_014-instagram" data-name="014-instagram" class="insta-svg">
                    <path id="Path_7" data-name="Path 7"
                      d="M19.884,0H7.38A7.388,7.388,0,0,0,0,7.38v12.5a7.388,7.388,0,0,0,7.38,7.38h12.5a7.388,7.388,0,0,0,7.38-7.38V7.38A7.388,7.388,0,0,0,19.884,0Zm5.782,19.884a5.788,5.788,0,0,1-5.782,5.782H7.38A5.788,5.788,0,0,1,1.6,19.884V7.38A5.788,5.788,0,0,1,7.38,1.6h12.5A5.788,5.788,0,0,1,25.666,7.38Zm0,0"
                      fill="#707070"></path>
                    <path id="Path_8" data-name="Path 8"
                      d="M123.459,116a7.455,7.455,0,1,0,7.455,7.455A7.463,7.463,0,0,0,123.459,116Zm0,13.311a5.856,5.856,0,1,1,5.856-5.856A5.863,5.863,0,0,1,123.459,129.315Zm0,0"
                      transform="translate(-109.827 -109.827)" fill="#707070"></path>
                    <path id="Path_9" data-name="Path 9"
                      d="M360.179,66.285a2.2,2.2,0,1,0,2.2,2.2A2.205,2.205,0,0,0,360.179,66.285Zm0,2.807a.6.6,0,1,1,.6-.6A.605.605,0,0,1,360.179,69.092Zm0,0"
                      transform="translate(-338.914 -62.755)" fill="#707070"></path>
                  </g>
                  <text id="login_with_Instagram" data-name="login with Instagram" transform="translate(29 17)"
                    fill="#707070" font-size="1" font-family="SegoeUI, Segoe UI" opacity="0">
                    <tspan x="0" y="0">login with Instagram</tspan>
                  </text>
                </svg>
              </a>
            </li>
            <li>
              <a href="javascript:;" class="twitter">
                <svg id="Component_12_1" data-name="Component 12 – 1" xmlns="http://www.w3.org/2000/svg" width="44"
                  height="32" viewBox="0 0 44 24.5">
                  <path id="_004-twitter" class="twitter-svg" data-name="004-twitter"
                    d="M11.292,24.5c-4.953,0-8.867-.865-10.74-2.374L.515,22.1l-.033-.033a1.523,1.523,0,0,1-.4-1.6L.1,20.414a1.551,1.551,0,0,1,1.415-.974A12.787,12.787,0,0,0,4.9,18.974a6.418,6.418,0,0,1-3.382-3.908A1.386,1.386,0,0,1,2,13.45a1.414,1.414,0,0,1,.422-.216A9.359,9.359,0,0,1,.5,9.8L.489,9.757.481,9.718A1.443,1.443,0,0,1,1.149,8.17a1.437,1.437,0,0,1,.684-.193,7.236,7.236,0,0,1-.546-1.668A6.978,6.978,0,0,1,2.029,1.66l.184-.368a1.026,1.026,0,0,1,1.644-.267l.335.336a15.823,15.823,0,0,0,9.124,5,7.268,7.268,0,0,1,1.962-4.19A6.885,6.885,0,0,1,20.193,0h.012a9.846,9.846,0,0,1,4.063,1.323c.874-.286,1.928-.729,3.021-1.2A1.38,1.38,0,0,1,28.833.4a1.356,1.356,0,0,1,.294,1.49q-.119.332-.27.651a1.382,1.382,0,0,1,.4.277,1.493,1.493,0,0,1,.371,1.395l-.013.047A5.693,5.693,0,0,1,27.331,7.4C27.153,16.861,20.026,24.5,11.292,24.5ZM2.22,21.157c1.765,1,5.128,1.6,9.071,1.6a13.588,13.588,0,0,0,10.074-4.583A16.42,16.42,0,0,0,25.594,7.034V6.987a1.025,1.025,0,0,1,.547-.907,3.7,3.7,0,0,0,1.6-1.769,1.026,1.026,0,0,1-.989-1.616,5.648,5.648,0,0,0,.388-.614c-.944.4-1.84.752-2.618.988a1.113,1.113,0,0,1-.856-.092,8.479,8.479,0,0,0-3.454-1.235,5.411,5.411,0,0,0-5.2,5.483,1.027,1.027,0,0,1-1.225,1.007C9.051,7.3,6.248,5.9,3.334,2.973a5.138,5.138,0,0,0-.339,3A6.35,6.35,0,0,0,4.5,8.9a1.026,1.026,0,0,1-1.036,1.668,4.7,4.7,0,0,1-.957-.368,8.67,8.67,0,0,0,2.972,3.447,1.026,1.026,0,0,1-.656,1.87,4.614,4.614,0,0,1-1.362-.295A4.68,4.68,0,0,0,7.2,17.869,1.026,1.026,0,0,1,7.5,19.787,12.331,12.331,0,0,1,2.22,21.157Zm0,0"
                    transform="translate(0 0.001)" fill="#707070"></path>
                  <text id="login_with_Twitter" data-name="login with Twitter" transform="translate(36 16)"
                    fill="#707070" font-size="1" font-family="SegoeUI, Segoe UI" opacity="0">
                    <tspan x="0" y="0">login with Twitter</tspan>
                  </text>
                </svg>
              </a>
            </li>
            <li class="text font-14 c-gray">Login With</li>
          </ul>
        </div>
        <div class="col-md-6">
          <div class="login-right">
            <div class="login-right-top">

              <h1 class="font-primary c-black">
                Subscription Plan <br>
              </h1>
   
              <form class="p-5 px-5 py-5 payment" method="POST" id="Regform" action="/signup/">
                <div class="mb-3">
                  <input type="text" name="first_name" autofocus="" id="first_name" class="form-control"
                    placeholder="First Name" required="">
                  <span style="color: red;"></span>

                </div>
                <div class="mb-3">
                  <input type="text" name="last_name" autofocus="" id="last_name" class="form-control"
                    placeholder="Last Name" required="">
                  <span style="color: red;"></span>

                </div>
                <div class="mb-3">
                  <input type="email" name="email" autofocus="" id="email" class="form-control" placeholder="Email"
                    required="">
                  <span style="color: red;"></span>

                </div>

                <div class="mb-3 position_rel">
                  <input type="password" name="password" id="password" class="form-control" placeholder="Password"
                    required="">
                  <i class="far fa-eye" id="togglePassword" style="cursor: pointer;"></i>
                </div>
                <div class="mb-3 position_rel">
                  <div class="mb-3 input-group"> <span class="input-group-text">+1</span>
                    <input type="hidden" name="phone_number" id="phone_number" maxlength="254" class="form-control"
                      placeholder="phone number">
                    <input type="text" name="" id="phoneNumber" maxlength="254" class="form-control mb-0 onlyNumber"
                      placeholder="Phone Number" required="">
                  </div>
                  <div class="mb-3 d-flex">
                  <input type="hidden" name="ga_status">
                  <input type="checkbox"  name="ga">&nbsp;
                  <label for="ga" class="ml-5">Connect to Google Analytics</label>
                </div>
                  <div class="mb-3">
                    <select name="billing_cycle" id="billing_cycle" style="color: #707070;" class="form-select form-select-sm form-control" aria-label=".form-select-sm example">
                      <option selected disabled>Select your Billing Cycle</option>
                      <option value="monthly">Monthly</option>
                      <option value="yearly">Yearly</option>
                    </select>
                  
                  </div>
                  <input type="text" name="user_plan" id="user_plan" class="form-control" disabled>
                </div>
                <div>
                  <input type="hidden" name="billing_cycle" id="billing_monthly" maxlength="254" class="form-control" style="color: #707070;">
                </div>
                <div class="mb-3">
                  <input type="hidden" name="plan_id" autofocus="" value="{{plan_id}}" id="plan_id" class="form-control"
                    placeholder="First Name" required="">
                    <input type="hidden" name="website_url" value="{{website_url}}" id="websiteUrl">
                  <span style="color: red;"></span>

                </div>
                <!-- <div class="select_dropdown">
                      <select  class="form-select form-control plan " name="plan_id" id="plan">
                        <option selected > Choose your Plan </option>
                        <option value="1" >Free</option>
                        <option value="2">Premium</option>
                      </select>
                    </div> -->

                <input type="hidden" name="card_token" id="token" />
                <span class="brand"><i class="pf pf-credit-card" id="brand-icon"></i></span>
                <div class="pro-plan">
                  <!--<label>Card Number</label> -->
                  <div id="cc-number" class="form-control mb-3">

                    <!-- a Stripe Element will be inserted. -->
                  </div>
                  <!-- <label>Expiration</label>-->
                  <div id="cc-exp" class="form-control mb-3">
                    <!-- a Stripe Element will be inserted. -->
                  </div>
                  <!-- <label>CVC</label> -->
                  <div id="cc-cvc" class="form-control mb-3">
                    <!-- a Stripe Element will be inserted. -->
                  </div>

       

              <div class="d-block text-center">
                <input type="hidden" id="captchaResponse" name="captcha_response">
              <script src='https://www.google.com/recaptcha/api.js'></script>
              <div class="g-recaptcha d-inline-block" data-sitekey="{{recaptcha_site_key}}" data-callback="correctCaptcha"></div>
              </div>
                </div>


                <button type="submit" class="btn--payment sbmitBtn "> <span
                    class="spinner-border spinner-border-sm sub_btn_loader d-none" role="status"
                    aria-hidden="true"></span>
                  <span class="visually-hidden">Loading...</span>Proceed</button>
                <!-- <button type="button" class="btn--save">Save</button> -->
                <div class="outcome">
                  <div class="error"></div>
                  <div class="success">
                    Success! Your Stripe token is <span class="token"></span>
                  </div>
                </div>
              </form>
        
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>




{% endblock %}

{% block extrascript %}
<script src="https://js.stripe.com/v3/"></script>
<script>
  var add_website_url = $('#websiteUrl').val();


  $(document).ready(function () {
    // console.log( "{{is_google_analytics_charged}}","hello")
    var gAnalyticsCharged = "{{is_google_analytics_charged}}"
    // gAnalyticsCharged = "False"
    // console.log("gogo", gAnalyticsCharged)
    let ga_value;

    if( $("#plan_id").attr("value") == 1 ) {
      
      $('input[name="ga"]').on('change',function(){
    if($(this).is(':checked') && gAnalyticsCharged === "True" ){
      ga_value = true
      $('input[name="ga_status"]').val(ga_value)
  $(".pro-plan").show()
  $('.btn--payment').removeClass('sbmitBtn');
      $('.btn--payment').addClass('sbmitBtn2');
    }else{
      ga_value = false
      $('input[name="ga_status"]').val(ga_value)
      $(".pro-plan").hide()
      $('.btn--payment').removeClass('sbmitBtn2');
      $('.btn--payment').addClass('sbmitBtn');
    }
   })

   $('input[name="ga"]').on('change',function(){
    if($(this).is(':checked') && gAnalyticsCharged === "True" ){
      // console.log("checked")
      $('.btn--payment').removeClass('sbmitBtn');
      $('.btn--payment').addClass('sbmitBtn2');
  }
    else {
      $('.btn--payment').removeClass('sbmitBtn2');
      $('.btn--payment').addClass('sbmitBtn');
    }
  })


    }

  
    
    function correctCaptcha(res) {

      $('#captchaResponse').val(res)
      $('.btn--payment').attr('disabled',false);
    }
  
       //getting plan_id of free,pro & corporate
        var plan_id= $("#plan_id").attr("value")
        if( plan_id == 1 ) {
          $("#user_plan").attr("value", "Free Plan")
          $("#billing_monthly").attr("value","monthly")
          $("#billing_cycle").hide();
          $('.btn--payment').removeClass('sbmitBtn2')
        $('.btn--payment').addClass('sbmitBtnfi')

        }

        else if (plan_id==2 ) {
         $('.btn--payment').removeClass('sbmitBtn')
         $('.btn--payment').addClass('sbmitBtn2')

          $("#user_plan").attr("value", "Pro Plan")
          $("#billing_monthly").remove();
          $(".pro-plan").show()
        }
        else if(plan_id==3 ){

           $('.btn--payment').removeClass('sbmitBtn')
          $('.btn--payment').addClass('sbmitBtn2')

          $("#user_plan").attr("value", "Corporate Plan")
          $("#billing_monthly").remove();
          $(".pro-plan").show()
        }else{
          $("#user_plan").hide();
          $("#billing_cycle").hide()
          $("#billing_monthly").hide()
          $(".pro-plan").hide();
        }

    //AJAX of getting public key of STRIPE for initializing Stripe components
    $.ajax({
      method: 'GET',
      url: '/payment/get_public_key/',
      success: function (res) {
        var pk_key = res.key;
        var stripe = Stripe(pk_key);

        var elements = stripe.elements();

        var style = {
          base: {
            iconColor: "#666EE8",
            color: "#70709e",
            lineHeight: "40px",
            fontWeight: 400,
            fontSize: "14px",

            "::placeholder": {
              color: "#70709e",
              fontWeight: 400,
              fontSize: "14px"
            }
          }
        };

        //cardNumber Input 
        var cardNumberElement = elements.create("cardNumber", {
          style: style,
          placeholder: 'Card Number: 1234 1234 1234 1234 ',
          showIcon: true
        });
        cardNumberElement.mount("#cc-number");

          //Card Expiry Input 
        var cardExpiryElement = elements.create("cardExpiry", {
          style: style,
          placeholder: 'Expiry Date: MM/YY',
        });
        cardExpiryElement.mount("#cc-exp");

          //Card CVC Input 
        var cardCvcElement = elements.create("cardCvc", {
          style: style
        });
        cardCvcElement.mount("#cc-cvc");

        //function of Stripe success and error 
        function setOutcome(result) {
          var successElement = document.querySelector(".success");
          var errorElement = document.querySelector(".error");
          successElement.classList.remove("visible");
          errorElement.classList.remove("visible");

          if (result.token) {
            // In this example, we're simply displaying the token
            successElement.querySelector(".token").textContent = result.token.id;
            successElement.classList.add("visible");
            $('#token').val('')
            $('#token').val(result.token.id)

          } else if (result.error) {
            errorElement.textContent = result.error.message;
            errorElement.classList.add("visible");
          }
        }

        //Cards icons
        var cardBrandToPfClass = {
          visa: "pf-visa",
          mastercard: "pf-mastercard",
          amex: "pf-american-express",
          discover: "pf-discover",
          diners: "pf-diners",
          jcb: "pf-jcb",
          unknown: "pf-credit-card"
        };

        //Show Cards Icon on input with condition 
        function setBrandIcon(brand) {
          var brandIconElement = document.getElementById("brand-icon");
          var pfClass = "pf-credit-card";
          if (brand in cardBrandToPfClass) {
            pfClass = cardBrandToPfClass[brand];
          }
          for (var i = brandIconElement.classList.length - 1; i >= 0; i--) {
            brandIconElement.classList.remove(brandIconElement.classList[i]);
          }
          brandIconElement.classList.add("pf");
          brandIconElement.classList.add(pfClass);
        }

        cardNumberElement.on("change", function (event) {
          // Switch brand logo
          if (event.brand) {
            setBrandIcon(event.brand);
          }

          setOutcome(event);
        });

        //creating Token on submit
        document.querySelector(".payment").addEventListener("submit", function (e) {
          e.preventDefault();
          var options = {};
          stripe.createToken(cardNumberElement, options).then(setOutcome);
        });


      }
    })

  })

  // with Stripe Token 
  $(document).on('click','.sbmitBtn2', function (e) {
     $('.sub_btn_loader').removeClass("d-none")
    var setInt = setInterval(SubmitForm, 1000);
    function SubmitForm() {
      var token = $('#token').val();
     
      if (token !== '' && token !== undefined) {
        clearInterval(setInt);
         
        var data = $('#Regform').serializeArray();
        console.log(data,'data')
        $.ajax({
          method: 'POST',
          url: '/signup/',
          data: data,
          beforeSend: function () {
            // $('.sub_btn_loader').removeClass("d-none")
            $('.sub_btn_loader').css("display", "inline-block")
          },
          success: function (res) {
            $('.sub_btn_loader').addClass("d-none")
            if (res.status == true) {
              var webURl =  $('#websiteUrl').val();
             window.location.href = `/accounts/login/?website_url=${webURl}&`
              ShowNoty(res.msg, 'success')
              $('.outcome').css('display', 'block')
              setTimeout(() => {
                // window.location.href = '/site_audit/dashboard/'
              }, 1000)

            }
            else {
              $('#first_name').val('');
              $('#last_name').val('');
              $('#email').val('');
              $('#password').val('');
              $('#phoneNumber').val('');
              $('#plan').prop('selectedIndex', 0);
              $('.outcome').css('display', 'none')
              ShowNoty(res.error, 'error')
            }
          },
          error: function (res) {
            // console.log("error" ,"Something Wrong", res );
            ShowNoty(res.statusText, 'error')
            setTimeout(() => {
              $(".sub_btn_loader").addClass("d-none")
            }, 1000);
          }
        })

      }

    }

  });

 

 
  // without Stripe Token 
  $(document).on('click','.sbmitBtn', function () {
            $('.sub_btn_loader').removeClass("d-none")
            $(".sbmitBtn").prop("disabled",true)

     var data = $('#Regform').serializeArray();
      console.log(data,'data')
      $.ajax({
          method: 'POST',
          url: '/signup/',
          data: data,
          beforeSend: function () {
            $('.sub_btn_loader').css("display", "inline-block")
          },
          success: function (res) {
            $('.sub_btn_loader').addClass("d-none")
            $(".sbmitBtn").prop("disabled",false)

            if (res.status == true) {
              var webURl =  $('#websiteUrl').val();
             window.location.href = `/accounts/login/?website_url=${webURl}&`

              ShowNoty(res.msg, 'success')
              $('.outcome').css('display', 'block')
              setTimeout(() => {
                
              }, 1000)

            }

            else {
              $('#first_name').val('');
              $('#last_name').val('');
              $('#email').val('');
              $('#password').val('');
              $('#phoneNumber').val('');
              $('#plan').prop('selectedIndex', 0);
              $('.outcome').css('display', 'none')
              ShowNoty(res.error, 'error')
            }
          },
          error: function (res) {
            // console.log("error" ,"Something Wrong", res );
            ShowNoty(res.statusText, 'error')
            setTimeout(() => {
              $(".sub_btn_loader").addClass("d-none")
            }, 1000);
          }
        })


    // var data = $('#Regform').serializeArray();

    // $.ajax({
    //   method: 'POST',
    //   url: '/signup/',
    //   data: data,
    //   beforeSend: function () {
    //     $('.sub_btn_loader').removeClass("d-none")
    //     $('.sub_btn_loader').css("display", "inline-block")
    //   },
    //   success: function (res) {
    //     $('.sub_btn_loader').addClass("d-none")

    //     if (res.status == true) {
    //        var webURl =  $('#websiteUrl').val();
    //          window.location.href = `/accounts/login/?website_url=${webURl}&`
    //       ShowNoty(res.msg, 'success')
    //       $('.outcome').css('display', 'none')
    //       setTimeout(() => {
    //         window.location.href = '/site_audit/dashboard/'
    //       }, 1000)
    //     }

    //     else {
    //       $('#first_name').val('');
    //       $('#last_name').val('');
    //       $('#email').val('');
    //       $('#password').val('');
    //       $('#phoneNumber').val('');
    //       $('#plan').prop('selectedIndex', 0);
    //       $('.outcome').css('display', 'none')
    //       ShowNoty(res.error, 'error')
    //     }
    //   },
    //   error: function (res) {
    //     // console.log("error" ,"Something Wrong", res );
    //     ShowNoty(res.statusText, 'error')
    //     setTimeout(() => {
    //       $(".sub_btn_loader").addClass("d-none")
    //     }, 1000);
    //   }
    // })




  });

  //enter button 
  $('input.onlyNumber').keyup(function (event) {
    if (event.which != 8 && event.which != 0 && event.which < 48 || event.which > 57) {
      $(this).val(function (index, value) {
        let val;

        val = value.replace(/\D/g, "");

        return val
      });
    }

    $("#phone_number").val("+1" + $('input.onlyNumber').val());
  });

  // $("#plan").change(function () {
  //   var end = this.value;
  //   var firstDropVal = $('#plan').val();

  //   if (firstDropVal == 2) {
  //     $('.btn--payment').removeClass('sbmitBtn')
  //     $('.btn--payment').removeClass('disabled')
  //     $('.btn--payment').addClass('sbmitBtn2')
  //     $('#Regform').addClass('payment')

  //   }
  //   else if (firstDropVal == 1) {
  //     $('#Regform').removeClass('payment');
  //     $('.btn--payment').removeClass('disabled')

  //   } else {
  //     $('.btn--payment').addClass('disabled');
  //   }

  // });


</script>
<script>

  //Password Eye icon functionality
  const togglePassword = document.querySelector('#togglePassword');
  const password = document.querySelector('#password');

  togglePassword.addEventListener('click', function (e) {
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);
    this.classList.toggle('fa-eye-slash');
  });

</script>
{% endblock %}